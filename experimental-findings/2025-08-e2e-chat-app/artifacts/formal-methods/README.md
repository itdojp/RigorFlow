# å½¢å¼æ‰‹æ³•æ¤œè¨¼ãƒ•ã‚¡ã‚¤ãƒ«

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
formal-methods/
â”œâ”€â”€ dafny/                    # Dafnyæ¤œè¨¼ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ CryptoVerification.dfy
â”‚   â”œâ”€â”€ DoubleRatchet.dfy
â”‚   â””â”€â”€ DoubleRatchetProof.dfy
â”œâ”€â”€ alloy/                    # Alloyãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ SecurityModel.als
â”‚   â”œâ”€â”€ DoubleRatchetModel.als
â”‚   â””â”€â”€ DoubleRatchet.als
â”œâ”€â”€ tla/                      # TLA+ä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ DoubleRatchet.tla
â”‚   â”œâ”€â”€ DoubleRatchetComplete.tla
â”‚   â””â”€â”€ formal_verification_demo.tla
â”œâ”€â”€ reports/                  # æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆï¼ˆç©ºï¼‰
â””â”€â”€ FORMAL_VERIFICATION_SUMMARY.md  # æ¤œè¨¼çµæœã‚µãƒãƒªãƒ¼
```

## ğŸ”¬ æ¤œè¨¼ãƒ„ãƒ¼ãƒ«åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«

### Dafny (3ãƒ•ã‚¡ã‚¤ãƒ«)
ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ¤œè¨¼ç”¨ã®è¨€èªã§ã€æš—å·åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ­£å½“æ€§ã‚’è¨¼æ˜

1. **CryptoVerification.dfy**
   - AES-GCMæš—å·åŒ–ã®ä»•æ§˜ã¨è¨¼æ˜
   - æš—å·åŒ–/å¾©å·åŒ–ã®å¯é€†æ€§è¨¼æ˜
   - éµã‚µã‚¤ã‚ºä¸å¤‰æ¡ä»¶ã®æ¤œè¨¼

2. **DoubleRatchet.dfy**
   - Double Ratchetã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®åŸºæœ¬å®Ÿè£…
   - å‰æ–¹ç§˜åŒ¿æ€§ã®ä»•æ§˜è¨˜è¿°
   - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¼å°å‡ºã®æ¤œè¨¼

3. **DoubleRatchetProof.dfy**
   - Double Ratchetã®å½¢å¼çš„è¨¼æ˜
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¨¼æ˜
   - çŠ¶æ…‹é·ç§»ã®æ­£å½“æ€§æ¤œè¨¼

### Alloy (3ãƒ•ã‚¡ã‚¤ãƒ«)
é–¢ä¿‚è«–ç†ã«åŸºã¥ããƒ¢ãƒ‡ãƒ«æ¤œæŸ»ãƒ„ãƒ¼ãƒ«

1. **SecurityModel.als**
   - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«
   - ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®ä»•æ§˜
   - æ¨©é™ç®¡ç†ã®æ¤œè¨¼

2. **DoubleRatchetModel.als**
   - Double Ratchetã®æŠ½è±¡ãƒ¢ãƒ‡ãƒ«
   - çŠ¶æ…‹é·ç§»ã®å¯è¦–åŒ–
   - ä¸å¤‰æ¡ä»¶ã®æ¤œè¨¼

3. **DoubleRatchet.als**
   - Double Ratchetå®Ÿè£…ã®è©³ç´°ãƒ¢ãƒ‡ãƒ«
   - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é †åºã®ä¿è¨¼
   - éµç®¡ç†ã®ä¸€è²«æ€§æ¤œè¨¼

### TLA+ (3ãƒ•ã‚¡ã‚¤ãƒ«)
æ™‚ç›¸è«–ç†ã«ã‚ˆã‚‹ä¸¦è¡Œã‚·ã‚¹ãƒ†ãƒ ã®ä»•æ§˜è¨˜è¿°

1. **DoubleRatchet.tla**
   - Double Ratchetãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®æ™‚ç›¸ä»•æ§˜
   - å®‰å…¨æ€§ï¼ˆSafetyï¼‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
   - æ´»æ€§ï¼ˆLivenessï¼‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

2. **DoubleRatchetComplete.tla**
   - å®Œå…¨ç‰ˆDouble Ratchetã®ä»•æ§˜
   - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡ã®ä¿è¨¼
   - ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ¤œè¨¼

3. **formal_verification_demo.tla**
   - ç°¡æ˜“ãƒ‡ãƒ¢ç”¨ä»•æ§˜
   - åŸºæœ¬çš„ãªçŠ¶æ…‹é·ç§»
   - æ¤œè¨¼æ‰‹æ³•ã®ä¾‹ç¤º

## ğŸ“Š æ¤œè¨¼ã‚«ãƒãƒ¬ãƒƒã‚¸

| æ¤œè¨¼é …ç›® | Dafny | Alloy | TLA+ |
|---------|-------|-------|------|
| æš—å·åŒ–æ­£å½“æ€§ | âœ… | - | - |
| éµç®¡ç† | âœ… | âœ… | âš ï¸ |
| çŠ¶æ…‹é·ç§» | âš ï¸ | âœ… | âœ… |
| ä¸¦è¡Œæ€§ | - | - | âœ… |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | âœ… | âœ… | âš ï¸ |

## ğŸ¯ æ¤œè¨¼çµæœ

### è¨¼æ˜ã•ã‚ŒãŸæ€§è³ª
- âœ… æš—å·åŒ–/å¾©å·åŒ–ã®å¯é€†æ€§
- âœ… å‰æ–¹ç§˜åŒ¿æ€§ï¼ˆForward Secrecyï¼‰
- âœ… ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®Œå…¨æ€§
- âœ… ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ãƒ•ãƒªãƒ¼
- âœ… ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å¥å…¨æ€§

### ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ
- âš ï¸ 5æ¥ç¶šä»¥ä¸Šã§ã®éµä¸æ•´åˆï¼ˆAlloyã§ç™ºè¦‹ã€ä¿®æ­£æ¸ˆã¿ï¼‰
- âš ï¸ ãƒãƒ³ã‚¹å†åˆ©ç”¨ã®å¯èƒ½æ€§ï¼ˆTLA+ã§ç™ºè¦‹ã€ä¿®æ­£æ¸ˆã¿ï¼‰
- âš ï¸ éæ±ºå®šçš„éµå°å‡ºï¼ˆDafnyã§ç™ºè¦‹ã€ä¿®æ­£æ¸ˆã¿ï¼‰

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### Dafnyæ¤œè¨¼å®Ÿè¡Œ
```bash
dafny /compile:0 /print:- CryptoVerification.dfy
```

### Alloyãƒ¢ãƒ‡ãƒ«æ¤œæŸ»
```bash
# Alloy Analyzerã§é–‹ã„ã¦å®Ÿè¡Œ
# Run -> Execute ã§ãƒ¢ãƒ‡ãƒ«æ¤œæŸ»
```

### TLA+ãƒ¢ãƒ‡ãƒ«æ¤œæŸ»
```bash
# TLC Model Checkerã§å®Ÿè¡Œ
tlc DoubleRatchet.tla
```

## ğŸ”— å‚è€ƒè³‡æ–™
- [Dafny Documentation](https://dafny.org/)
- [Alloy Documentation](https://alloytools.org/)
- [TLA+ Documentation](https://lamport.azurewebsites.net/tla/tla.html)

---
*æœ€çµ‚æ›´æ–°: 2025å¹´8æœˆ9æ—¥*